/*! npm.im/iphone-inline-video 2.2.0 */
var enableInlineVideo=(function(){
/*! npm.im/intervalometer */
function y(B,C,G,A){var z;var E;function D(H){z=C(D,A);B(H-(E||H));E=H}return{start:function o(){if(!z){D(0)}},stop:function F(){G(z);z=null;E=0}}}function x(o){return y(o,requestAnimationFrame,cancelAnimationFrame)}function p(z,o,B){function A(C){if(!B||B(z,o)){C.stopImmediatePropagation()}}z.addEventListener(o,A);return A}function s(A,o,D,B){function z(){return D[o]}function C(E){D[o]=E}if(B){C(A[o])}Object.defineProperty(A,o,{get:z,set:C})}function n(z,o,A){A.addEventListener(o,function(){return z.dispatchEvent(new Event(o))})}function m(o,z){Promise.resolve().then(function(){o.dispatchEvent(new Event(z))})}var t=typeof document==="object"&&"object-fit" in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches;var l="bfred-it:iphone-inline-video";var h="bfred-it:iphone-inline-video:event";var g="bfred-it:iphone-inline-video:nativeplay";var w="bfred-it:iphone-inline-video:nativepause";function c(z){var o=new Audio();n(z,"play",o);n(z,"playing",o);n(z,"pause",o);o.crossOrigin=z.crossOrigin;o.src=z.src||z.currentSrc||"data:";return o}var e=[];var u=0;var j;function k(o,A,z){if((j||0)+200<Date.now()){o[h]=true;j=Date.now()}if(!z){o.currentTime=A}e[++u%3]=A*100|0/100}function q(o){return o.driver.currentTime>=o.video.duration}function i(z){var o=this;if(o.video.readyState>=o.video.HAVE_FUTURE_DATA){if(!o.hasAudio){o.driver.currentTime=o.video.currentTime+((z*o.video.playbackRate)/1000);if(o.video.loop&&q(o)){o.driver.currentTime=0}}k(o.video,o.driver.currentTime)}else{if(o.video.networkState===o.video.NETWORK_IDLE&&o.video.buffered.length===0){o.video.load()}}if(o.video.ended){delete o.video[h];o.video.pause(true)}}function v(){var z=this;var o=z[l];if(z.webkitDisplayingFullscreen){z[g]();return}if(o.driver.src!=="data:"&&o.driver.src!==z.src){k(z,0,true);o.driver.src=z.src}if(!z.paused){return}o.paused=false;if(z.buffered.length===0){z.load()}o.driver.play();o.updater.start();if(!o.hasAudio){m(z,"play");if(o.video.readyState>=o.video.HAVE_ENOUGH_DATA){m(z,"playing")}}}function d(A){var z=this;var o=z[l];o.driver.pause();o.updater.stop();if(z.webkitDisplayingFullscreen){z[w]()}if(o.paused&&!A){return}o.paused=true;if(!o.hasAudio){m(z,"pause")}if(z.ended&&!z.webkitDisplayingFullscreen){z[h]=true;m(z,"ended")}}function f(A,o){var z={};A[l]=z;z.paused=true;z.hasAudio=o;z.video=A;z.updater=x(i.bind(z));if(o){z.driver=c(A)}else{A.addEventListener("canplay",function(){if(!A.paused){m(A,"playing")}});z.driver={src:A.src||A.currentSrc||"data:",muted:true,paused:true,pause:function(){z.driver.paused=true},play:function(){z.driver.paused=false;if(q(z)){k(A,0)}},get endedfunction(){return q(z)}}}A.addEventListener("emptied",function(){var B=!z.driver.src||z.driver.src==="data:";if(z.driver.src&&z.driver.src!==A.src){k(A,0,true);z.driver.src=A.src;if(B||(!o&&A.autoplay)){z.driver.play()}else{z.updater.stop()}}},false);A.addEventListener("webkitbeginfullscreen",function(){if(!A.paused){A.pause();A[g]()}else{if(o&&z.driver.buffered.length===0){z.driver.load()}}});if(o){A.addEventListener("webkitendfullscreen",function(){z.driver.currentTime=A.currentTime});A.addEventListener("seeking",function(){if(e.indexOf(A.currentTime*100|0/100)<0){z.driver.currentTime=A.currentTime}})}}function a(z){var o=z[h];delete z[h];return !z.webkitDisplayingFullscreen&&!o}function b(z){var o=z[l];z[g]=z.play;z[w]=z.pause;z.play=v;z.pause=d;s(z,"paused",o.driver);s(z,"muted",o.driver,true);s(z,"playbackRate",o.driver,true);s(z,"ended",o.driver);s(z,"loop",o.driver,true);p(z,"seeking",function(A){return !A.webkitDisplayingFullscreen});p(z,"seeked",function(A){return !A.webkitDisplayingFullscreen});p(z,"timeupdate",a);p(z,"ended",a)}function r(A,z){if(z===void 0){z={}}if(A[l]){return}if(!z.everywhere){if(!t){return}if(!(z.iPad||z.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent)){return}}A.pause();var o=A.autoplay;A.autoplay=false;f(A,!A.muted);b(A);A.classList.add("IIV");if(A.muted&&o){A.play();A.addEventListener("playing",function B(){A.autoplay=true;A.removeEventListener("playing",B)})}if(!/iPhone|iPod|iPad/.test(navigator.platform)){console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}return r}());